<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Ball Color Game</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
    .ball {
      position: absolute;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <!-- Ball color picker -->
  <input type="color" id="colorPicker">
  
  <script>
    // Get the canvas and its context
    const canvas = document.createElement("canvas");
    const context = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    document.body.appendChild(canvas);

    // Retrieve saved balls from local storage or initialize an empty array
    let savedBalls = JSON.parse(localStorage.getItem("balls")) || [];

    // Function to draw a ball
    function drawBall(x, y, color) {
      context.beginPath();
      context.fillStyle = color;
      context.arc(x, y, 25, 0, Math.PI * 2);
      context.fill();
      context.closePath();
    }

    // Function to save ball data in local storage
    function saveBall(x, y, color) {
      savedBalls.push({ x, y, color });
      localStorage.setItem("balls", JSON.stringify(savedBalls));
    }

    // Function to draw all saved balls
    function drawSavedBalls() {
      savedBalls.forEach((ball) => {
        drawBall(ball.x, ball.y, ball.color);
      });
    }

    // Event listener for the color picker to change the ball color
    const colorPicker = document.getElementById("colorPicker");
    colorPicker.addEventListener("change", (event) => {
      currentBallColor = event.target.value;
    });

    // Variables to track the current ball position and color
    let currentBallColor = "red"; // Default color
    let currentBallX = 0;
    let currentBallY = 0;

    // Function to create a new ball on the cursor position
    function createBallOnCursor(event) {
      const rect = canvas.getBoundingClientRect();
      currentBallX = event.clientX - rect.left;
      currentBallY = event.clientY - rect.top;
      drawBall(currentBallX, currentBallY, currentBallColor);
      saveBall(currentBallX, currentBallY, currentBallColor);
    }

    // Event listener to create a new ball when the "E" key is pressed
    window.addEventListener("keydown", (event) => {
      if (event.key === "e" || event.key === "E") {
        createBallOnCursor(event);
      }
    });

    // Event listener to draw saved balls when the page loads
    window.addEventListener("load", () => {
      drawSavedBalls();
    });

    // Event listener to draw new balls when the canvas is clicked
    canvas.addEventListener("click", createBallOnCursor);
  </script>
</body>
</html>
